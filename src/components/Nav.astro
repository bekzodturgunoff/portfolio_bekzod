---
import { Sun, Moon } from 'lucide-astro';
import { getDictionary } from '../i18n';
import LanguageSwitcher from './LanguageSwitcher.astro';

interface Props {
  lang?: string;
}

const { lang } = Astro.props;
const t = getDictionary(lang);
const homeHref = lang ? `/${lang}` : '/';
const links = [
  { href: '#about', label: t.nav.links.about },
  { href: '#skills', label: t.nav.links.skills },
  { href: '#case-study', label: t.nav.links.caseStudy },
  { href: '#work', label: t.nav.links.work },
  { href: '#contact', label: t.nav.links.contact },
];

---

<a href="#main" class="skip-to-main">Skip to main content</a>

<nav class="sticky top-0 z-50 backdrop-blur-md bg-white/80 dark:bg-neutral-950/80 border-b border-black/10 dark:border-white/10 transition-all" aria-label="Main navigation">
  <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between gap-3">
  <a href={homeHref} class="font-semibold tracking-tight hover:text-neutral-600 dark:hover:text-neutral-300 transition-colors whitespace-nowrap" aria-label="Home">Bekzod.dev</a>
    <div class="flex items-center gap-2 sm:gap-4 flex-wrap justify-end">
      <ul class="hidden sm:flex items-center gap-6 text-sm">
        {links.map((l) => (
          <li><a class="hover:text-brand-600 dark:hover:text-brand-400 transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 rounded" href={l.href}>{l.label}</a></li>
        ))}
      </ul>
  <a href="/resume/resume_Bekzod.docx" download class="uppercase text-[11px] tracking-[0.18em] hover:underline underline-offset-4 decoration-neutral-400/70 dark:decoration-white/40 transition-all whitespace-nowrap" aria-label="Download resume">{t.nav.links.resume}</a>
  <div class="w-full sm:w-auto">
        <LanguageSwitcher lang={lang} />
      </div>
      <button
        type="button"
        title="Toggle dark/light mode"
        aria-label="Toggle dark/light mode"
        class="h-9 w-9 inline-flex items-center justify-center rounded-full border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-black/30 dark:focus-visible:ring-white/30 transition-all flex-shrink-0"
        onclick="window.__toggleTheme && window.__toggleTheme()"
      >
        <span class="dark:hidden"><Moon size={18} /></span>
        <span class="hidden dark:inline"><Sun size={18} /></span>
      </button>
    </div>
  </div>
</nav>
