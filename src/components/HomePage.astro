---
import Base from "../layouts/Base.astro";
import Nav from "./Nav.astro";
import Hero from "./Hero.astro";
import Section from "./Section.astro";
import CaseStudy from "./CaseStudy.astro";
import Projects from "./Projects.astro";
import ContactForm from "./ContactForm.astro";
import Footer from "./Footer.astro";
import { getDictionary } from '../i18n';

interface Props {
  lang: string;
}

const { lang } = Astro.props;
const t = getDictionary(lang);
const [headingLeft, ...headingRightWords] = t.contact.heading.split(" ");
const headingRight = headingRightWords.join(" ");
const meta = {
  title: "Bekzod — Software Engineer",
  description:
    "Software engineer crafting fast, reliable web products with React, Astro, and TypeScript. Based in Seoul, collaborating end to end to ship accessible, high-performing experiences.",
};
---
<Base title={meta.title} description={meta.description} lang={lang}>
  <Nav lang={lang} />
  <main id="main">
    <Hero lang={lang} />

    <Section id="about" title={t.nav.links.about}>
      <p class="max-w-prose text-neutral-700 dark:text-neutral-300">{t.about.intro}</p>
      <div class="mt-6 text-[13px] text-neutral-500 dark:text-neutral-400">
        <span>{t.about.basedIn} · </span>
        <a
          class="underline underline-offset-4 decoration-neutral-400/60 dark:decoration-white/40 hover:text-neutral-800 dark:hover:text-neutral-100"
          href="mailto:bekzodturgunoff@gmail.com"
        >
          bekzodturgunoff@gmail.com
        </a>
      </div>
      <p class="mt-3 text-[13px] text-neutral-500 dark:text-neutral-400">{t.about.languagesLine}</p>
    </Section>

    <Section id="skills" title={t.skills.title}>
      <div class="grid gap-4 sm:grid-cols-3" data-reveal>
        {t.skills.groups.map((group) => (
          <div class="rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-white/5 p-4 sm:p-5">
            <div class="text-[11px] uppercase tracking-[0.18em] text-neutral-500 dark:text-neutral-400 mb-3">{group.title}</div>
            <div class="flex flex-wrap gap-2">
              {group.items.map((s) => (
                  <span class="px-2.5 py-1 rounded-full text-xs tracking-wide uppercase bg-black/5 dark:bg-white/10 border border-black/10 dark:border-white/10">{s}</span>
              ))}
            </div>
          </div>
        ))}
      </div>
    </Section>

    <div id="case-study" class="hidden md:block">
      <CaseStudy lang={lang} />
    </div>

    <Section id="work" title={t.projects.selectedWork}>
      <Projects />
    </Section>

    <Section id="contact" title="">
      <h2 class="leading-[0.95] text-4xl sm:text-6xl md:text-7xl lg:text-8xl font-extrabold tracking-tight break-words mb-7 sm:mb-9 lg:mb-11" data-reveal>
        <span class="text-neutral-300 dark:text-white/90">{headingLeft}</span>
        <span class="ml-3 text-neutral-900 dark:text-white">{headingRight}</span>
      </h2>
      <p class="max-w-2xl text-neutral-700 dark:text-neutral-300 mb-7 sm:mb-9 lg:mb-11 text-lg" data-reveal>{t.contact.intro}</p>

      <div class="flex flex-col sm:grid sm:grid-cols-3 gap-2.5 sm:gap-3 lg:gap-4 mb-3 sm:mb-5 lg:mb-6" data-reveal>
        <a href="tel:+8201079328573" class="btn btn-outline btn-lg text-center px-4 py-2 sm:px-5 sm:py-2.5 lg:px-6 lg:py-3">
          {t.contact.ctas.call}
        </a>
        <a href="mailto:bekzodturgunoff@gmail.com" class="btn btn-outline btn-lg text-center px-4 py-2 sm:px-5 sm:py-2.5 lg:px-6 lg:py-3">
          {t.contact.ctas.email}
        </a>
        <a
          href="https://t.me/bekzodturgunoff"
          target="_blank"
          rel="noreferrer"
          class="btn btn-outline btn-lg text-center px-4 py-2 sm:px-5 sm:py-2.5 lg:px-6 lg:py-3"
        >
          {t.contact.ctas.telegram}
        </a>
      </div>

      {t.contact.availability && (
        <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-6" data-reveal>{t.contact.availability}</p>
      )}

      <ContactForm lang={lang} />
    </Section>
  </main>

  <Footer lang={lang} />

  <script src="/scripts/reveal.js" defer></script>
</Base>
